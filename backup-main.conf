# Runtime configuration for backup-main.sh
# Edit these values as needed for your backup environment

TN_HOST="truenas.lan"
TN_TOKEN=""

SNAP_PARENT="$HOME/backup/backup-snapshots" # Btrfs subvolume parent
SNAP_SOURCE="$HOME"

# Optional: Directory containing zfs-snap.py (defaults to script location if unset)
# BIN_DIR="$HOME/.local/bin"
REMOTE_HOST="backup@$TN_HOST"
REMOTE_BASE="/data/repos"
SSH_OPTS="-p 5522 -i $HOME/.ssh/id_backup-nearlyone_ed25519"

RETRY_DELAY=120
MAX_RETRIES=10
LOCAL_KEEP=10

# encrypted tar backup
ENCRYPTED_TAR_SRC="$HOME/nearlyone"
ENCRYPTED_TAR_ARCHIVE="$HOME/nearlyone.tar.age"
AGE_BIN="$(command -v age || true)"
AGE_RECIPIENT_FILE="$HOME/.ssh/id_backup-nearlyone_ed25519.pub"
ENCRYPTED_TAR_REMOTE_BASE="backup@truenas.lan:/data"

# Logging
LOGFILE="$HOME/backup-sync.log"

# Email notifications (set EMAIL_TO to enable)
EMAIL_TO="wagi@monom.org"
EMAIL_FROM="backup@backup.lan"
EMAIL_SUBJECT_OK="Backup completed successfully"
EMAIL_SUBJECT_FAIL="Backup FAILED"
